document.addEventListener("DOMContentLoaded", () => {
  const loginContainer = document.getElementById("login-container");
  const cadastroContainer = document.getElementById("cadastro-container");
  const menu = document.getElementById("menu");
  const abas = document.querySelectorAll(".aba");
  const toggleDark = document.getElementById("toggle-dark");

  // TROCAR TELA LOGIN/CADASTRO
  document.getElementById("mostrar-cadastro").addEventListener("click", e => {
    e.preventDefault();
    loginContainer.classList.add("hidden");
    cadastroContainer.classList.remove("hidden");
  });

  document.getElementById("mostrar-login").addEventListener("click", e => {
    e.preventDefault();
    cadastroContainer.classList.add("hidden");
    loginContainer.classList.remove("hidden");
  });

  // LOGIN FIXO (Luis)
  document.getElementById("login-form").addEventListener("submit", e => {
    e.preventDefault();
    const usuario = document.getElementById("login-usuario").value;
    const senha = document.getElementById("login-senha").value;
    if (usuario === "luis" && senha === "luisxl") {
      loginContainer.classList.add("hidden");
      menu.classList.remove("hidden");
      document.getElementById("painel").classList.remove("hidden");
    } else {
      alert("Usuário ou senha inválidos!");
    }
  });

  // CADASTRO SIMPLES
  document.getElementById("cadastro-form").addEventListener("submit", e => {
    e.preventDefault();
    alert("Cadastro realizado com sucesso!");
    cadastroContainer.classList.add("hidden");
    loginContainer.classList.remove("hidden");
  });

  // TROCAR ABAS
  document.querySelectorAll("nav#menu button[data-aba]").forEach(btn => {
    btn.addEventListener("click", () => {
      abas.forEach(aba => aba.classList.add("hidden"));
      document.getElementById(btn.dataset.aba).classList.remove("hidden");
    });
  });

  // LOGOUT
  document.getElementById("logout").addEventListener("click", () => {
    menu.classList.add("hidden");
    abas.forEach(aba => aba.classList.add("hidden"));
    loginContainer.classList.remove("hidden");
  });

  // CHAT SIMPLES
  const chatBox = document.getElementById("chat-box");
  document.getElementById("chat-enviar").addEventListener("click", () => {
    const input = document.getElementById("chat-input");
    if (input.value.trim() !== "") {
      const userMsg = document.createElement("div");
      userMsg.classList.add("msg", "user");
      userMsg.textContent = "Você: " + input.value;
      chatBox.appendChild(userMsg);

      setTimeout(() => {
        const hotelMsg = document.createElement("div");
        hotelMsg.classList.add("msg", "hotel");
        hotelMsg.textContent = "Hotel: Recebido!";
        chatBox.appendChild(hotelMsg);
      }, 1000);

      input.value = "";
    }
  });

  // FEEDBACK
  document.getElementById("feedback-form").addEventListener("submit", e => {
    e.preventDefault();
    const servico = document.getElementById("feedback-servico").value;
    const texto = document.getElementById("feedback-texto").value;
    if (servico && texto.trim() !== "") {
      alert("Feedback enviado para " + servico + ". Obrigado!");
      e.target.reset(); // limpa o formulário
    }
  });

  // SERVIÇOS
  document.getElementById("servicos-form").addEventListener("submit", e => {
    e.preventDefault();
    const servico = document.getElementById("servico-select").value;
    const dia = document.getElementById("servico-dia").value;
    const hora = document.getElementById("servico-hora").value;
    if (servico && dia && hora) {
      alert(`Serviço "${servico}" agendado para ${dia} às ${hora}`);
      e.target.reset(); // limpa o formulário
    }
  });

  // BOTÃO ALTO CONTRASTE
  toggleDark.addEventListener("click", () => {
    document.body.classList.toggle("contraste");
  });

  // LOGIN FUNCIONÁRIOS
  document.getElementById("func-form").addEventListener("submit", e => {
    e.preventDefault();
    const nome = document.getElementById("func-nome").value;
    const senha = document.getElementById("func-senha").value;
    if (senha === "admin123") {
      document.getElementById("func-login").classList.add("hidden");
      const bemvindo = document.getElementById("func-bemvindo");
      bemvindo.textContent = `Seja bem-vindo funcionário ${nome}`;
      bemvindo.classList.remove("hidden");
    } else {
      alert("Senha inválida para funcionário!");
    }
  });
});
