document.addEventListener("DOMContentLoaded", () => {

  const loginSection = document.getElementById("login-section");
  const cadastroSection = document.getElementById("cadastro-section");
  const menu = document.getElementById("menu");
  const chatSection = document.getElementById("chat-section");
  const servicosSection = document.getElementById("servicos-section");
  const painelSection = document.getElementById("painel-section");
  const feedbackSection = document.getElementById("feedback-section");

  const showCadastroLink = document.getElementById("show-cadastro");
  const showLoginLink = document.getElementById("show-login");

  const loginForm = document.getElementById("login-form");
  const cadastroForm = document.getElementById("cadastro-form");

  const chatForm = document.getElementById("chat-form");
  const chatBox = document.getElementById("chat-box");

  const servicoForm = document.getElementById("servico-form");
  const servicoList = document.getElementById("servico-list");

  const feedbackForm = document.getElementById("feedback-form");
  const feedbackList = document.getElementById("feedback-list");

  const logoutBtn = document.getElementById("logout-btn");
  const botaoPreto = document.getElementById("botao-preto");

  function showSection(section) {
    [painelSection, chatSection, servicosSection, feedbackSection].forEach(s => s.classList.add("hidden"));
    section.classList.remove("hidden");
  }

  // Alternar login/cadastro
  showCadastroLink.addEventListener("click", e => {
    e.preventDefault();
    loginSection.classList.add("hidden");
    cadastroSection.classList.remove("hidden");
  });

  showLoginLink.addEventListener("click", e => {
    e.preventDefault();
    cadastroSection.classList.add("hidden");
    loginSection.classList.remove("hidden");
  });

  // LOGIN
  loginForm.addEventListener("submit", e => {
    e.preventDefault();
    const user = document.getElementById("login-user").value.trim();
    const pass = document.getElementById("login-pass").value.trim();
    if (user === "luis" && pass === "luisxl") {
      document.querySelector(".centralizado-container").classList.add("hidden");
      menu.classList.remove("hidden");
      showSection(painelSection);
    } else {
      alert("Usuário ou senha incorretos!");
    }
  });

  // CADASTRO
  cadastroForm.addEventListener("submit", e => {
    e.preventDefault();
    const nome = document.getElementById("nome").value.trim();
    const quarto = document.getElementById("quarto").value.trim();
    const telefone = document.getElementById("telefone").value.trim();
    const email = document.getElementById("email").value.trim();
    if (nome && quarto && telefone && email) {
      document.querySelector(".centralizado-container").classList.add("hidden");
      menu.classList.remove("hidden");
      showSection(painelSection);
      alert(`Hóspede ${nome} cadastrado com sucesso!`);
    } else {
      alert("Preencha todos os campos!");
    }
  });

  // Logout
  logoutBtn.addEventListener("click", () => {
    menu.classList.add("hidden");
    [painelSection, chatSection, servicosSection, feedbackSection].forEach(s => s.classList.add("hidden"));
    document.querySelector(".centralizado-container").classList.remove("hidden");
  });

  // Menu lateral
  menu.querySelectorAll("button[data-section]").forEach(btn => {
    btn.addEventListener("click", () => {
      const target = btn.getAttribute("data-section");
      if (target === "painel-section") showSection(painelSection);
      if (target === "chat-section") showSection(chatSection);
      if (target === "servicos-section") showSection(servicosSection);
      if (target === "feedback-section") showSection(feedbackSection);
    });
  });

  // Chat
  chatForm.addEventListener("submit", e => {
    e.preventDefault();
    const msg = document.getElementById("chat-input").value.trim();
    if (msg) {
      const p = document.createElement("p");
      p.classList.add("msg", "user");
      p.textContent = msg;
      chatBox.appendChild(p);
      document.getElementById("chat-input").value = "";
      chatBox.scrollTop = chatBox.scrollHeight;

      setTimeout(() => {
        const reply = document.createElement("p");
        reply.classList.add("msg", "hotel");
        reply.textContent = "Recepção: Mensagem recebida!";
        chatBox.appendChild(reply);
        chatBox.scrollTop = chatBox.scrollHeight;
      }, 1000);
    }
  });

  // Serviços
  servicoForm.addEventListener("submit", e => {
    e.preventDefault();
    const servico = document.getElementById("servico-nome").value.trim();
    if (servico) {
      const li = document.createElement("li");
      li.textContent = servico;
      servicoList.appendChild(li);
      document.getElementById("servico-nome").value = "";
    }
  });

  // Feedback
  feedbackForm.addEventListener("submit", e => {
    e.preventDefault();
    const texto = document.getElementById("feedback-text").value.trim();
    const nota = document.getElementById("feedback-nota").value;
    if (texto) {
      const li = document.createElement("li");
      li.textContent = `Nota ${nota}: ${texto}`;
      feedbackList.appendChild(li);
      document.getElementById("feedback-text").value = "";
      document.getElementById("feedback-nota").value = "5";
    }
  });

  // BOTÃO TELA PRETA SEM DEPENDER DO LOGIN
  botaoPreto.addEventListener("click", () => {
    document.body.style.backgroundColor = "black";
    document.body.style.color = "white";
  });

});

